<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>防抖调试 Demo</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }

    #log {
      border: 1px solid #ccc;
      padding: 10px;
      height: 150px;
      overflow-y: auto;
      background: #fafafa;
    }
  </style>
</head>

<body>

  <h2>防抖调试 Demo</h2>

  <input id="input" type="text" placeholder="输入试试..."
    style="width: 300px; padding: 8px; font-size: 18px;" />

  <p id="rawCount">原始触发次数：0</p>
  <p id="debounceCount">防抖后执行次数：0</p>

  <p style="margin-top: 20px; font-weight: bold;">执行日志：</p>
  <div id="log"></div>

  <script>
    // ⭐ 最简单的防抖函数
    function debounce(fn, delay) {
      let timer = null
      return function (...args) {
        clearTimeout(timer)
        timer = setTimeout(() => {
          fn.apply(this, args)
        }, delay)
      }
    }

    const input = document.getElementById('input')
    const rawCount = document.getElementById('rawCount')
    const debounceCount = document.getElementById('debounceCount')
    const log = document.getElementById('log')

    let rawTimes = 0
    let debouncedTimes = 0

    const delay = 500 // 你可以随时改

    const fn = function(e) {
      debouncedTimes++
      debounceCount.textContent = '防抖后执行次数：' + debouncedTimes

      const time = new Date().toLocaleTimeString()
      log.innerHTML += `<div>执行：${e.target.value} —— ${time}</div>`
      log.scrollTop = log.scrollHeight
    }
    const update = debounce(fn, delay)

    input.addEventListener('input', function(e)  {
      rawTimes++
      rawCount.textContent = '原始触发次数：' + rawTimes
      update(e)
    })
  </script>

</body>
</html>